<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mesh Data Systems Kft - Robot Kontroller és Monitorozó alkalmazás</title>
    <script type="text/javascript" charset="utf-8">
    	var coords = new Array();
		var coordsHistory = 10;
    	
    	var intervalId = setInterval(function() {
    		drawMap(Math.floor(Math.random()*10000), Math.floor(Math.random()*10000));
    	}, 2000);
    	
    	setTimeout(function(){
    		alert("vege");
    		clearInterval(intervalId);
    	}, 30000)
    
    	function drawMap (numX, numY) {
			if (coords[0]) {
				if (coords[0]['x'] != numX || coords[0]['y'] != numY) {
					coords.unshift({x:numX,y:numY})

					if (coords.length > coordsHistory) {
						coords.pop();
					}

					// TODO: draw map
				}
			} else {
				coords.push({x:numX,y:numY});
			}
			console.log(coords);
		}

    </script>
  </head>
  <body>
    <canvas id="agv_map" style="width: 800px; height: 600px; float: left;"></canvas>

  </body>
</html>
